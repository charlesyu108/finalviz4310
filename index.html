<!DOCTYPE html>
<html>

<head>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <link href="styles.css" rel="stylesheet"></link>
</head>

<body>
  <h1>INFO 4310 Final Project</h1>
  <svg id="bubble-svg" width=800 height=600></svg>
</body>

<script>
  //Loading in Data
  d3.queue()
    .defer(d3.csv, "profiles.csv")
    .await(makeViz);

  function makeViz(err, data) {
    console.log("Data Loaded!");

    var bubble_svg = d3.select("#bubble-svg"),
      width = +bubble_svg.attr("width"),
      height = +bubble_svg.attr("height");

    var sampleData = {
      "children": [{
          "text": "hello",
          "count": 20
        },
        {
          "text": "artsy",
          "count": 200
        },
        {
          "text": "adventurous",
          "count": 145
        },
        {
          "text": "love",
          "count": 305
        },
        {
          "text": "harry potter",
          "count": 30
        },
        {
          "text": "game of thrones",
          "count": 13
        },
        {
          "text": "san francisco",
          "count": 155
        },
        {
          "text": "fun",
          "count": 300
        },
        {
          "text": "amp",
          "count": 70
        },

      ]
    }
    //NOTE!: The "children" field is very important to include!

    var color = d3.scaleOrdinal(d3.schemeCategory20);

    var bubble = d3.pack(sampleData)
      .size([width, height])
      .padding(1.5);

    var nodes = d3.hierarchy(sampleData)
      .sum(d => d.count);

    var node = bubble_svg.selectAll(".node")
      .data(bubble(nodes).descendants())
      .enter()
      .filter(d => !d.children)
      .append("g")
      .attr("class", "node")
      .attr("transform", d => "translate(" + d.x + "," + d.y + ")");

    node.append("title")
      .text(d => d.data.text);

    node.append("circle")
      .attr("r", d => d.r)
      .style("fill", (d, i) => color(i));

    node.append("text")
      .attr("dy", ".2em")
      .attr("font-family", "sans-serif")
      .attr("text-anchor", "middle")
      .attr("font-size", (d => d.r / 5))
      .attr("fill", "white")
      .text(d => d.data.text)
  }
  
  //Bubble viz credit: https://bl.ocks.org/alokkshukla/3d6be4be0ef9f6977ec6718b2916d168
</script>


</html>
